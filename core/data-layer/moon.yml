language: "rust"
type: "library"
owners:
  defaultOwner: "@wave-autoscale-team"

tasks:
  test:
    command: "cargo nextest run -p data-layer --test-threads=1"
    env:
      RUST_LOG: data_layer=debug
  test-history:
    command: "cargo test --test data_layer test_autoscaling_history -- --nocapture"
    inputs:
      - "@globs(sources)"
      - "@globs(tests)"
    env:
      RUST_LOG: data_layer=debug
  test-watch:
    command: "cargo test test_run_watch -- --test-threads=1 --nocapture"
    inputs:
      - "@globs(sources)"
      - "@globs(tests)"
    env:
      RUST_LOG: info
  build:
    command: "cargo build"
    inputs:
      - "@globs(sources)"
