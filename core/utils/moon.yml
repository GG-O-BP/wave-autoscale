language: "rust"
type: "library"

tasks:
  lint:
    command: "cargo clippy --fix --allow-dirty"
    inputs:
      - "@globs(sources)"
    env:
      RUST_LOG: info
  audit:
    command: "cargo audit"
    inputs:
      - "@globs(sources)"
    env:
      RUST_LOG: info
  # Test - Integration + Unit
  test:
    command: "cargo test -- --nocapture --test-threads 1"
    deps:
      - "lint"
    inputs:
      - "@globs(sources)"
      - "@globs(tests)"
    env:
      RUST_LOG: debug
