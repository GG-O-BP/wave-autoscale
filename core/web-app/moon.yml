language: 'typescript'
type: 'application'
owners:
  defaultOwner: '@wave-autoscale-team'

tasks:
  install:
    command: 'npm install'
    inputs:
      - './package.json'
      - './package-lock.json'
      - './node_modules/**/*'
  # Override the lint, audit task to use the next.js lint command
  lint:
    command: 'next lint'
    inputs:
      - '@globs(sources)'
    options:
      mergeArgs: 'replace'
      mergeDeps: 'replace'
      mergeInputs: 'replace'
  audit:
    command: 'npm audit'
    inputs:
      - '@globs(sources)'
  test:
    # TODO: Add test command
    command: 'echo wep-app'
    inputs:
      - '@globs(sources)'
  run:
    command: 'next dev --turbo'
    inputs:
      - '@globs(sources)'
      - 'tsconfig.json'
  build:
    command: 'next build'
    inputs:
      - '@globs(sources)'
      - 'tsconfig.json'
      - 'next.config.js'
    outputs:
      - '.next/standalone/*'
  start-standalone:
    command: 'node .next/standalone/server.js'
    inputs:
      - '@globs(sources)'
      - 'tsconfig.json'
