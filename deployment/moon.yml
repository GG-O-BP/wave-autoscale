language: "bash"

tasks:
  build-docker-compose:
    command: "cp core/wave-autoscale/tests/config/wave-config.yaml deployment/docker-compose/wave-config.yaml"
    options:
      runFromWorkspaceRoot: true
  build-k8s:
    command: "helm template helm-chart > k8s/install.yaml"
    inputs:
      - "helm-chart/**/*"
    outputs:
      - "k8s/install.yaml"
  build-helm-chart-repo:
    command: "cd ./helm-chart-repo && helm package ../helm-chart && helm repo index ./ --url https://github.waveautoscale.com/helm && cd .. && ./copy-chart-to-docs.sh"
    inputs:
      - "helm-chart/**/*"
    outputs:
      - "helm-chart-repo/*"
      - "/docs/helm/*"